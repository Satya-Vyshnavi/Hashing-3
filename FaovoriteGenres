public class Main {
    public static HashMap<String, List<String>> findFavGenres(HashMap<String, List<String>> usersongs,HashMap<String, List<String>> songGenres){
        HashMap<String, String> songToGenres = new HashMap<>();
        for(String genre : songGenres.keySet()){
            List<String> allsongs = songGenres.get(genre);
            for(String song: allsongs){
                songToGenres.put(song,genre);
            }
        }
        HashMap<String, List<String>> result = new HashMap<>();
                
        for(String user : usersongs.keySet()){
            List<String> allsongs = usersongs.get(user);
            int max = 0;
            HashMap<String, Integer> freqMap = new HashMap<>();
            for(String song: allsongs){
                String genre = songToGenres.get(song);
                freqMap.put(genre,freqMap.getOrDefault(genre,0)+1);
                max = Math.max(max,freqMap.get(genre));
            }
            for(String genre: freqMap.keySet()){
                if(freqMap.get(genre) == max){
                    if(!result.containsKey(user)){
                        result.put(user,new ArrayList<>());
                    }
                    result.get(user).add(genre);
                }
            }
        }
            return result;
    }
    public static void main(String[] args) {
       HashMap<String, List<String>> usersongs = new HashMap<>();
       HashMap<String, List<String>> songGenres = new HashMap<>();
       usersongs.put("David",Arrays.asList("song1","song4","song5","song8"));
       usersongs.put("Jim",Arrays.asList("song2","song3","song6"));
       usersongs.put("Kimberly",Arrays.asList("song1","song7"));
       usersongs.put("Jane",Arrays.asList("song9","song4"));
       songGenres.put("Jazz",Arrays.asList("song1","song2","song5"));
       songGenres.put("pop",Arrays.asList("song3","song4","song6"));
       songGenres.put("Rock",Arrays.asList("song7","song8","song9"));
       System.out.println(findFavGenres(usersongs,songGenres));        
    }
}